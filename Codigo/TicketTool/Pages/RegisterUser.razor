@page "/register"
@inject AuthService AuthService
@inject NavigationManager Navigation

<h3>Registro de Usuario</h3>

<div>
    <input @bind="Email" placeholder="Correo Electrónico" />
    <input @bind="Password" placeholder="Contraseña" type="password" />
    <input @bind="ConfirmPassword" placeholder="Confirmar Contraseña" type="password" />

    <button @onclick="OnRegisterUser">Registrar</button>
</div>

@if (ErrorMessage != null)
{
    <p style="color:red;">@ErrorMessage</p>
}

@code {
    private string Email { get; set; }
    private string Password { get; set; }
    private string ConfirmPassword { get; set; }
    private string ErrorMessage { get; set; }

    // Renombrar el método a OnRegisterUser
    private async Task OnRegisterUser()
    {
        // Validar que las contraseñas coincidan
        if (Password != ConfirmPassword)
        {
            ErrorMessage = "Las contraseñas no coinciden.";
            return;
        }

        // Registrar el usuario
        var result = await AuthService.RegisterUserAsync(Email, Password);

        if (result)
        {
            // Si el registro es exitoso, redirigir al inicio de sesión
            Navigation.NavigateTo("/login");
        }
        else
        {
            ErrorMessage = "El registro falló. Intenta nuevamente.";
        }
    }
}
